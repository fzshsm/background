var t={columns:[{data:"userNo"},{data:"nickName"},{data:"gender"},{data:"qq"},{data:"gameLeagueId"},{data:"isRealInfo"},{data:"identity"},{data:"clubName"},{data:"status"},{data:"id"}],datacolumn:null,data:null,actionsUrl:[],toastrOpts:{},datatable:null,ajaxUrl:"",getFormatOptions:function(){var t=this;return{ajaxUrl:t.ajaxUrl,columns:t.columns,infolabel:"用户总数：_TOTAL_",emptyTable:"暂无用户数据！",lengthMenu:"每页  ：_MENU_",pageMenu:[[15,30,50],[15,30,50]],search:!0}},setActionsUrl:function(t){"object"==typeof t&&(this.actionsUrl=t)},resetSearchInput:function(){var t=this;$(".dataTables_filter").empty(),$(".dataTables_filter").addClass("col-md-3").html($("#user-search").html()),$(".dataTables_filter .dropdown-menu a").click(function(){$("button.dropdown-toggle").attr("data-searchtype",$(this).attr("data-searchtype")),$("button.dropdown-toggle").html($(this).text()+'　<span class="caret"></span>')}),$(".dataTables_filter input#content").off("keypress"),$(".dataTables_filter input#content").on("keypress",function(t){13==t.keyCode&&$("button.search").trigger("click")}),$("button.search").off("click"),$("button.search").on("click",function(){var a=$("button.dropdown-toggle").attr("data-searchtype"),e=$(".dataTables_filter #content").val();t.datatable.on("preXhr.dt",function(t,n,s){s.search={type:a,value:e}}),t.datatable.ajax.reload(function(){$(".dataTables_filter input#content").val(e)})})},processColumns:function(t){var a=$(t).find("td");this.datacolumn={};for(var e in this.columns)column=this.columns[e].data,e==this.columns.length-1&&(column="actions"),this.datacolumn[column]=a[e]},initDataTable:function(){this.resetSearchInput()},execute:function(t,a){this.processColumns(t),this.data=a,this.ID(),this.gender(),this.realInfo(),this.identity(),this.status(),this.actions()},ID:function(){this.render(this.datacolumn.userNo,this.data.userNo,"text-center")},gender:function(){var t=parseInt(this.data.gender),a=$("<i>");0==t?a.addClass("fa fa-mars-stroke color-blue font-18").attr("title","男"):a.addClass("fa fa-venus color-nacarat font-18").attr("title","女"),this.render(this.datacolumn.gender,a,"text-center")},qq:function(){this.render(this.datacolumn.qq,this.data.qq)},league:function(){this.render(this.datacolumn.gameName,this.data.gameName)},realInfo:function(){var t=parseInt(this.data.isRealInfo),a=$("<span>");0==t?a.addClass("td label label-default disabled").text("暂无"):a.addClass("td label label-success").text("实名"),this.render(this.datacolumn.isRealInfo,a,"text-center")},identity:function(){var t=$("<span>");switch(this.data.identity){case"famous":t.addClass("td label label-secondary").text("职业玩家");break;case"player":t.addClass("td label bg-gold").text("知名人士")}this.render(this.datacolumn.identity,t,"text-center")},status:function(){var t=$("<i>");1==parseInt(this.data.status)?t.addClass("fa fa-lock color-red font-18").attr("title","已锁定"):t.addClass("fa fa-check-circle color-green font-18").attr("title","正常"),this.render(this.datacolumn.status,t,"text-center")},actions:function(){var t=this,a=parseInt(this.data.status),e=["编辑","认证","封禁","解封"],n="#",s=$(this.datacolumn.actions);s.empty();for(var o in e){var i="",c=t.data.nickName;switch(void 0!==this.actionsUrl[o]&&(n=this.actionsUrl[o]+"?id="+this.data.id),o){case"0":icon=$("<i>").addClass("fa fa-pencil"),i=$("<a>").addClass("btn btn-default btn-sm btn-icon icon-left").attr("href",n).html(icon).append(e[o]);break;case"1":icon=$("<i>").addClass("fa fa-check"),i=$("<a>").addClass("btn btn-orange btn-sm btn-icon icon-left").attr("href",n).html(icon).append(e[o]);break;case"2":0==a&&(icon=$("<i>").addClass("fa fa-lock"),(i=$("<a>").addClass("btn btn-danger btn-sm btn-icon icon-left").attr("href",n).html(icon).append(e[o])).on("click",function(){return confirmText=$("<span>").addClass("color-red font-16").html("确定要封停  ‘"+c+"’ 这个用户吗？"),successText="对 "+c+" 这个用户已成功封停！",t.showConfirmModal(this,confirmText,successText),!1}));break;case"3":1==a&&(icon=$("<i>").addClass("fa fa-unlock"),(i=$("<a>").addClass("btn btn-success btn-sm btn-icon icon-left").attr("href",n).html(icon).append(e[o])).on("click",function(){return confirmText=$("<span>").addClass("color-red font-16").html("确定要解锁  ‘"+c+"’ 这个用户吗？"),successText="成功解禁  "+c+" ！",t.showConfirmModal(this,confirmText,successText),!1}))}""!=i&&$(s).append(i)}},render:function(t,a,e){$(t).html(a).addClass(e)},showConfirmModal:function(t,a,e){var n=this;jQuery("#confirm-modal .modal-body").html(a),jQuery("#confirm-modal .confirm").off("click"),jQuery("#confirm-modal .confirm").on("click",function(){$.ajax({url:jQuery(t).attr("href"),type:"get",dataType:"json",success:function(t){"success"==t.status?n.datatable.ajax.reload(function(){$(".loading-shade").fadeOut(),toastr.success(e,"",n.toastrOpts)},!1):toastr.error(t.message,"",n.toastrOpts)}}),jQuery("#confirm-modal").modal("hide")}),jQuery("#confirm-modal").modal("show")}};